<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Real-time Chat App</title>
    <!-- Tailwind CSS via CDN for a quick, modern UI -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Socket.io client (served by the backend) -->
    <script defer src="/socket.io/socket.io.js"></script>
    <!-- Main frontend logic -->
    <script defer src="/main.js"></script>
  </head>
  <body class="bg-slate-900 text-slate-100 min-h-screen flex items-center justify-center">
    <div class="w-full max-w-3xl px-4 py-6">
      <div
        class="bg-slate-800/80 backdrop-blur-lg shadow-xl rounded-2xl border border-slate-700 flex flex-col h-[80vh]"
      >
        <!-- Header -->
        <header
          class="px-5 py-4 border-b border-slate-700 flex items-center justify-between gap-3"
        >
          <div>
            <h1 class="text-lg font-semibold tracking-tight">
              Real-time Chat
            </h1>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-emerald-400 animate-pulse"></span>
            <span class="text-xs text-emerald-300 font-medium">
              Connected
            </span>
          </div>
        </header>

        <!-- Username overlay -->
        <div
          id="usernameOverlay"
          class="absolute inset-0 bg-slate-900/90 flex items-center justify-center z-20"
        >
          <div class="bg-slate-800 border border-slate-700 rounded-2xl p-6 w-full max-w-sm">
            <h2 class="text-lg font-semibold mb-2">Choose a username</h2>
            <p class="text-xs text-slate-400 mb-4">
              This will be visible to everyone in the chat room.
            </p>
            <form id="usernameForm" class="space-y-3">
              <input
                id="usernameInput"
                type="text"
                maxlength="20"
                required
                placeholder="e.g. intern_dev_01"
                class="w-full rounded-xl border border-slate-600 bg-slate-900/60 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent placeholder:text-slate-500"
              />
              <button
                type="submit"
                class="w-full inline-flex items-center justify-center gap-2 rounded-xl bg-emerald-500 hover:bg-emerald-400 text-slate-900 text-sm font-semibold py-2.5 transition-colors"
              >
                Enter chat
              </button>
            </form>
          </div>
        </div>

        <!-- Chat area -->
        <main class="flex-1 flex flex-col">
          <!-- Messages -->
          <div
            id="messages"
            class="flex-1 overflow-y-auto px-5 py-4 space-y-3 scroll-smooth"
          >
            <!-- Messages will be injected here -->
          </div>

          <!-- Composer -->
          <form
            id="messageForm"
            class="border-t border-slate-700 px-4 py-3 flex items-end gap-2"
          >
            <!-- Emoji picker -->
            <div class="relative">
              <button
                type="button"
                id="emojiToggle"
                class="inline-flex items-center justify-center w-9 h-9 rounded-xl border border-slate-600 bg-slate-900/60 text-xl hover:border-emerald-400 hover:text-emerald-300 transition-colors"
                title="Add emoji"
              >
                ğŸ˜Š
              </button>
              <div
                id="emojiPanel"
                class="hidden absolute bottom-11 left-0 z-10 w-56 max-h-48 overflow-y-auto rounded-xl border border-slate-700 bg-slate-900 shadow-lg p-2 text-xl"
              >
                <!-- Simple, manual emoji grid -->
                <div class="grid grid-cols-6 gap-1">
                  <button type="button" class="emoji-btn">ğŸ˜€</button>
                  <button type="button" class="emoji-btn">ğŸ˜</button>
                  <button type="button" class="emoji-btn">ğŸ˜‚</button>
                  <button type="button" class="emoji-btn">ğŸ¤£</button>
                  <button type="button" class="emoji-btn">ğŸ˜Š</button>
                  <button type="button" class="emoji-btn">ğŸ˜</button>
                  <button type="button" class="emoji-btn">ğŸ˜</button>
                  <button type="button" class="emoji-btn">ğŸ¤“</button>
                  <button type="button" class="emoji-btn">ğŸ¤©</button>
                  <button type="button" class="emoji-btn">ğŸ¥³</button>
                  <button type="button" class="emoji-btn">ğŸ¤”</button>
                  <button type="button" class="emoji-btn">ğŸ™Œ</button>
                  <button type="button" class="emoji-btn">ğŸ‘</button>
                  <button type="button" class="emoji-btn">ğŸ‘€</button>
                  <button type="button" class="emoji-btn">ğŸ”¥</button>
                  <button type="button" class="emoji-btn">ğŸ’¯</button>
                  <button type="button" class="emoji-btn">âœ…</button>
                  <button type="button" class="emoji-btn">â˜•</button>
                  <button type="button" class="emoji-btn">ğŸ•</button>
                  <button type="button" class="emoji-btn">ğŸš€</button>
                  <button type="button" class="emoji-btn">ğŸ’¡</button>
                  <button type="button" class="emoji-btn">ğŸ§ </button>
                  <button type="button" class="emoji-btn">ğŸ“</button>
                  <button type="button" class="emoji-btn">ğŸ“š</button>
                </div>
              </div>
            </div>

            <!-- Text input -->
            <div class="flex-1">
              <textarea
                id="messageInput"
                rows="1"
                placeholder="Type a message and hit Enter..."
                class="w-full resize-none rounded-xl border border-slate-600 bg-slate-900/60 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent placeholder:text-slate-500"
              ></textarea>
            </div>

            <!-- Send button -->
            <button
              type="submit"
              class="inline-flex items-center justify-center gap-2 rounded-xl bg-emerald-500 hover:bg-emerald-400 text-slate-900 text-sm font-semibold px-4 py-2 transition-colors"
            >
              <span>Send</span>
            </button>
          </form>
        </main>
      </div>
    </div>
  </body>
</html>

